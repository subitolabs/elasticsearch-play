<!DOCTYPE html>
<html id="html" ng-class="{'menu-active' : $root.navOpened, 'loading' : $root.loading}" class="loading">
  <head>
    <meta charset="utf-8">
      <meta content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
      <meta content="chrome=1" http-equiv="X-UA-Compatible">
      <meta content="notranslate" name="google">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="mobile-web-app-capable" content="yes">
      <meta name="description" content="">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>ElasticSearch Analyzer testr</title>

	<link href="/styles/vendor.css" rel="stylesheet" />
	<link href="/styles/testr.css" rel="stylesheet" />
	
  </head>
  <body id="body" ng-app="testr">

      <header class="navbar navbar-default">
            <h1 class="pull-left">ElasticSearch TestR <small>filters tokenizers analyzers</small></h1>
            <div class="pull-right">
                <a ng-click="dialog_settings=true"><i class="fa fa-gears"></i> Settings</a>
                <a ng-click="dialog_about=true"><i class="fa fa-beer"></i> About</a>
            </div>
      </header>

      <div class="clearfix" ng-controller="testr">

          <ui-layout style="top: 40px; left:2px;right: 2px;bottom: 2px;" options="{ flow : 'row', dividerSize : 5 }">

              <ui-layout-container>

                  <ui-layout options="{ flow : 'column', dividerSize : 5 }">
                      <ui-layout-container>
                          <div class="__h clearfix">
                              <h2>Filters</h2>
                              <a ng-click="dialog_filter_add_open=true"><i class="fa fa-folder-open"></i></a>
                              <a ng-click="dialog_filter_add_open=true"><i class="fa fa-plus"></i></a>
                          </div>
                          <my-json-editor ng-model="filters"></my-json-editor>
                      </ui-layout-container>
                      <ui-layout-container>
                          <div class="__h clearfix">
                              <h2>Tokenizers</h2>
                              <a ng-click="dialog_tokenizer_add=true"><i class="fa fa-folder-open"></i></a>
                              <a ng-click="dialog_tokenizer_add=true"><i class="fa fa-plus"></i></a>
                          </div>
                          <my-json-editor ng-model="tokenizers"></my-json-editor>
                      </ui-layout-container>
                      <ui-layout-container>
                          <div class="__h clearfix">
                              <h2>Analyzers</h2>
                              <a ng-click="dialog_url_open=true"><i class="fa fa-folder-open"></i></a>
                              <a ng-click="dialog_analyzer_add_open=true"><i class="fa fa-plus"></i></a>
                          </div>
                          <my-json-editor ng-model="analyzers"></my-json-editor>
                      </ui-layout-container>
                  </ui-layout>

              </ui-layout-container>

              <ui-layout-container class="results">
                  <div class="__h clearfix">
                      <h2>Live test</h2>
                  </div>
                  <div ng-class="{__body : true, loading : running}">
                      <form ng-submit="run()">
                          <input type="text" class="form-control" placeholder="Enter phrase to analyze.." ng-model="sample" />
                          <div class="clearfix" style="margin-top:5px">
                              <button class="btn btn-success" type="submit">Run Tests</button>
                          </div>
                      </form>
                      <div class="___h"></div>
                      <div class="alert alert-danger" ng-show="error!=null">
                          <i class="fa fa-exclamation-triangle"></i>
                          <p>{{error}}</p>
                      </div>
                      <table class="table table-striped">
                          <tr ng-repeat="test in tests">
                              <td>{{test.title}}</td>
                              <td>
                              <span ng-repeat="token in test.tokens" class="label label-primary">
                                  {{token.token}}
                              </span>
                              </td>
                          </tr>
                      </table>
                  </div>
              </ui-layout-container>

          </ui-layout>


          <my-dialog title="Available token filters" open="dialog_filter_add_open">
              <table class="table table-stripped">
                  <tr ng-repeat="filter in availableFilters">
                      <td width="100%">
                          <a ng-click="addFilter(filter)" class="btn btn-primary" title="Add this filter"><i class="fa fa-plus"></i></a>
                          {{filter.title}}
                      </td>
                      <td nowrap><a class="btn btn-default" title="Documentation" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/{{filter.url}}" target="_blank">?</a></td>
                  </tr>
              </table>
          </my-dialog>

          <my-dialog title="New tokenizer" open="dialog_tokenizer_add">
              <table class="table table-stripped">
                  <tr ng-repeat="token in availableTokenizers">
                      <td width="100%">
                          <a ng-click="addTokenizer(token)" class="btn btn-primary" title="Add this tokenizer"><i class="fa fa-plus"></i></a>
                          {{token.title}}
                      </td>
                      <td nowrap><a class="btn btn-default" title="Documentation" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/{{token.url}}" target="_blank">?</a></td>
                  </tr>
              </table>
          </my-dialog>

          <my-dialog title="New analyzer" open="dialog_analyzer_add_open">
              <form class="form-horizontal" ng-submit="addAnalyzer()">
                  <div class="form-group">
                      <label for="inputNewAnalyzerTokenizer" class="col-sm-2 control-label">Tokenizer:</label>
                      <div class="col-sm-10">
                          <select class="form-control" id="inputNewAnalyzerTokenizer" ng-model="analyzer_new.tokenizer">
                              <option value="standard">Standard</option>
                              <option value="keyword">Keyword</option>
                              <option value="letter">Letter</option>
                              <option value="whitespace">whitespace</option>
                              <option value="uax_url_email">UAX email URL</option>
                              <option value="path_hierarchy">Path hierarchy</option>
                              <option value="whitespace">whitespace</option>
                              <option value="classic">Classic</option>
                          </select>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="inputNewAnalyzerName" class="col-sm-2 control-label">Name:</label>
                      <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputNewAnalyzerName" ng-model="analyzer_new.name">
                      </div>
                  </div>
                  <div>
                      <input type="submit" class="btn btn-success" value="Ok" />
                  </div>
              </form>
          </my-dialog>

          <my-dialog title="About this application" open="dialog_settings">
              <form class="form-horizontal" ng-submit="saveSettings()">
                  <div class="form-group">
                      <label for="inputSettingsFontSize" class="col-sm-4 control-label">Editor font size:</label>
                      <div class="col-sm-8">
                          <input type="number" class="form-control" id="inputSettingsFontSize" ng-model="settings.font_size">
                      </div>
                  </div>
                  <div>
                      <input type="submit" class="btn btn-success" value="Save settings" />
                  </div>
              </form>
          </my-dialog>

          <my-dialog title="About this application" open="dialog_about">
              <p>Made with love during 2014 Chistmas party by Thomas Decaux (aka <a href="http://ebuildy.com" target="_blank">eBuildy</a>)</p>
              <p>
                Things I used:
                <ul class="text-left">
                    <li>Angular Javascript framework</li>
                    <li>Angular UI layout</li>
                    <li>ACE editor</li>
                    <li>Continuous integration with Grunt tasks</li>
                    <li>API with Php / Symfony2 framework / elasticsearch client</li>
                    <li>Hosted in the cloud</li>
                    <li>ElasticSearch version 1.4</li>
                </ul>
              </p>
              <p class="text-left">
                  If you find a bug or have cool ideas, share it!
              </p>
              <p>
                  <a href="https://github.com/ebuildy/elasticsearch-testr" target="_blank" class="btn btn-success"><i class="fa fa-github"></i> github.com/ebuildy/elasticsearch-testr</a>
              </p>
          </my-dialog>

      </div>

	  <script src="/scripts/vendor.js"></script>
	  <script src="/scripts/testr.js"></script>

  </body>
</html>