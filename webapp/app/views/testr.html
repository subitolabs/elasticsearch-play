<header class="navbar navbar-default">
    <h1 class="pull-left">ElasticSearch TestR
        <small>filters tokenizers analyzers</small>
    </h1>
    <div class="pull-right loading-hide">
        <a ng-href="#/" title="Open an index"><i class="fa  fa-folder-open"></i></a>
        <a ng-click="openDialog('save')" href="javascript:void(0)" title="Save this index"><i class="fa  fa-save"></i></a>
        <a ng-click="openDialog('settings')" href="javascript:void(0)" title="Settings"><i class="fa fa-gears"></i></a>
        <a ng-click="openDialog('about')" href="javascript:void(0)" title="About ElasticSearch Testr"><i class="fa fa-beer"></i></a>
    </div>
</header>

<ui-layout class="loading-hide" style="top: 40px; left:2px;right: 2px;bottom: 2px;"
           options="{ flow : 'row', dividerSize : 5 }">

    <ui-layout-container>

        <ui-layout options="{ flow : 'column', dividerSize : 5 }">
            <ui-layout-container>
                <div class="__h clearfix">
                    <h2>Filters</h2>
                    <a ng-click="openDialog('filterAdd')" href="javascript:void(0)"><i class="fa fa-plus"></i></a>
                </div>
                <my-json-editor ng-model="filters"></my-json-editor>
            </ui-layout-container>
            <ui-layout-container>
                <div class="__h clearfix">
                    <h2>Tokenizers</h2>
                    <a ng-click="openDialog('tokenizerAdd')" href="javascript:void(0)"><i class="fa fa-plus"></i></a>
                </div>
                <my-json-editor ng-model="tokenizers"></my-json-editor>
            </ui-layout-container>
            <ui-layout-container>
                <div class="__h clearfix">
                    <h2>Analyzers</h2>
                    <a ng-click="openDialog('analyzerAdd')" href="javascript:void(0)"><i class="fa fa-plus"></i></a>
                </div>
                <my-json-editor ng-model="analyzers"></my-json-editor>
            </ui-layout-container>
        </ui-layout>

    </ui-layout-container>

    <ui-layout-container class="results">
        <div class="__h clearfix">
            <h2>Test</h2>
        </div>
        <div ng-class="{__body : true, loading : running}">
            <form ng-submit="run()">
                <input type="text" class="form-control" placeholder="Enter phrase to analyze.." ng-model="sample"/>

                <div class="clearfix" style="margin-top:5px">
                    <button class="btn btn-success" type="submit">Run Tests</button>
                </div>
            </form>
            <div class="___h"></div>
            <div class="alert alert-danger" ng-show="error!=null">
                <i class="fa fa-exclamation-triangle"></i>

                <p>{{error}}</p>
            </div>
            <table class="table table-striped">
                <tr ng-repeat="test in tests.analyzers">
                    <td>Analyzer</td>
                    <td><strong>{{test.title}}</strong></td>
                    <td>
                                  <span ng-repeat="token in test.tokens" class="label label-primary">
                                      {{token.token}}
                                  </span>
                    </td>
                </tr>
                <tr ng-repeat="test in tests.filters">
                    <td>Filter</td>
                    <td><strong>{{test.title}}</strong></td>
                    <td>
                                  <span ng-repeat="token in test.tokens" class="label label-primary">
                                      {{token.token}}
                                  </span>
                    </td>
                </tr>
            </table>
        </div>
    </ui-layout-container>

</ui-layout>

<my-dialog id="filterAddDialog" title="Available token filters">
    <div style="margin-bottom: 5px">
        <input class="form-control" placeholder="Search filter..." ng-model="filtersSearchFilter.title" />
    </div>
    <table class="table table-stripped">
        <tr ng-repeat="filter in availableFilters | filter:filtersSearchFilter">
            <td width="100%">
                <a ng-click="addFilter(filter)" class="btn btn-primary" title="Add this filter"><i
                        class="fa fa-plus"></i></a>
                {{filter.title}}
            </td>
            <td nowrap><a class="btn btn-default" title="Documentation"
                          href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/{{filter.url}}"
                          target="_blank">?</a></td>
        </tr>
    </table>
</my-dialog>

<my-dialog id="tokenizerAddDialog" title="New tokenizer">
    <table class="table table-stripped">
        <tr ng-repeat="token in availableTokenizers">
            <td width="100%">
                <a ng-click="addTokenizer(token)" class="btn btn-primary" title="Add this tokenizer"><i
                        class="fa fa-plus"></i></a>
                {{token.title}}
            </td>
            <td nowrap><a class="btn btn-default" title="Documentation"
                          href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/{{token.url}}"
                          target="_blank">?</a></td>
        </tr>
    </table>
</my-dialog>

<my-dialog id="analyzerAddDialog" title="New analyzer">
    <form class="form-horizontal" ng-submit="addAnalyzer()">
        <div class="form-group">
            <label for="inputNewAnalyzerTokenizer" class="col-sm-2 control-label">Tokenizer:</label>

            <div class="col-sm-10">
                <select class="form-control" id="inputNewAnalyzerTokenizer" ng-model="analyzer_new.tokenizer">
                    <option value="standard">Standard</option>
                    <option value="keyword">Keyword</option>
                    <option value="letter">Letter</option>
                    <option value="whitespace">whitespace</option>
                    <option value="uax_url_email">UAX email URL</option>
                    <option value="path_hierarchy">Path hierarchy</option>
                    <option value="whitespace">whitespace</option>
                    <option value="classic">Classic</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="inputNewAnalyzerName" class="col-sm-2 control-label">Name:</label>

            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputNewAnalyzerName" ng-model="analyzer_new.name">
            </div>
        </div>
        <div>
            <input type="submit" class="btn btn-success" value="Ok"/>
        </div>
    </form>
</my-dialog>

<my-dialog id="settingsDialog" title="Settings (not working yet..)">
    <form class="form-horizontal" ng-submit="saveSettings()">
        <div class="form-group">
            <label for="inputSettingsFontSize" class="col-sm-4 control-label">Editor font size:</label>

            <div class="col-sm-8">
                <input type="number" class="form-control" id="inputSettingsFontSize" ng-model="settings.font_size">
            </div>
        </div>
        <div>
            <input type="submit" class="btn btn-success" value="Save settings"/>
        </div>
    </form>
</my-dialog>

<my-dialog id="aboutDialog" title="About this application">
    <p>Made with love during 2014 Chistmas party by SubitoLabs team and Thomas Decaux</p>

    <p>
        Things we used:
    <ul class="text-left">
        <li>Angular Javascript framework</li>
        <li>Angular UI layout</li>
        <li>ACE editor</li>
        <li>Continuous integration with Grunt tasks</li>
        <li>API with Php / Symfony2 framework / elasticsearch client</li>
        <li>Hosted in the cloud</li>
        <li>ElasticSearch version 1.4 (plugins ICU / Phonetic)</li>
    </ul>
    </p>
    <p class="text-left">
        If you find a bug or have cool ideas, share it!
    </p>

    <p>
        <a href="https://github.com/subitolabs/elasticsearch-testr" target="_blank" class="btn btn-success"><i
                class="fa fa-github"></i> github.com/subitolabs/elasticsearch-testr</a>
    </p>
</my-dialog>

<my-dialog id="saveDialog" title="Save this index">
    <div class="alert alert-info text-left">
        <i class="fa fa-save"></i> The index is automatically saved when you run a test, you can bookmark this URL, it's your own index now!
    </div>
</my-dialog>

<my-dialog id="loadingIndexDialog" title="Loading index" class="dialog--open">
    <div class="alert alert-info text-left">
        We are loading the index, it will be automatically saved when you run a test, you can bookmark this URL, it's your own index now!
    </div>
    <br />
    <div class="alert alert-danger" ng-hide="loadingIndexError==null">{{loadingIndexError}}</div>
</my-dialog>